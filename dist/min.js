function log(){log.history=log.history||[],log.history.push(arguments),this.console&&console.log(Array.prototype.slice.call(arguments)[0])}function handleLogin(){var e=[],o=window.swaggerUi.api.authSchemes||window.swaggerUi.api.securityDefinitions;if(o){var a,t=o;for(a in t){var i=t[a];if("oauth2"===i.type&&i.scopes){var n;if(Array.isArray(i.scopes)){var p;for(p=0;p<i.scopes.length;p++)e.push(i.scopes[p])}else for(n in i.scopes)e.push({scope:n,description:i.scopes[n],OAuthSchemeKey:a})}}}for(window.swaggerUi.api&&window.swaggerUi.api.info&&(appName=window.swaggerUi.api.info.title),popupDialog=$(['<div class="modal api-popup-dialog in" id="credentials-modal" tabindex="-1" role="dialog" aria-labelledby="credentials-modal-label" aria-hidden="false" style="display: block;">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header">','<button type="button" class="close api-popup-cancel" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>','<h3 class="modal-title" id="credentials-modal-label">Select OAuth2.0 Scopes</h3>',"</div>",'<div class="modal-body">',"<p>Scopes are used to grant an application different levels of access to data on behalf of the end user. Each API may declare one or more scopes.",'<a href="#">Learn how to use</a>',"</p>","<p><strong>"+appName+"</strong> API requires the following scopes. Select which ones you want to grant to Swagger UI.</p>","<form>",'<div class="api-popup-scopes">','<div class="scopes">',"</div>","</div>","<form>",'<p class="error-msg"></p>',"</div>",'<div class="modal-footer">','<div class="api-popup-actions"><button class="api-popup-cancel btn btn-default" type="button">Cancel</button><button class="api-popup-authbtn btn btn-primary" type="button">Authorize</button></div>',"</div>","</div>","</div>","</div>"].join("")),$(document.body).append(popupDialog),popup=popupDialog.find(".scopes").empty(),p=0;p<e.length;p++)n=e[p],str='<span data-toggle-scope="'+n.scope+'" class="scope">'+n.scope+"</span>",popup.append(str);popupDialog.find("scopes").click(function(){popupMask.hide(),popupDialog.hide(),popupDialog.empty(),popupDialog=[]}),popupDialog.find("[data-toggle-scope]").click(function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),popupDialog.find("button.api-popup-cancel").click(function(){popupMask.hide(),popupDialog.hide(),popupDialog.empty(),popupDialog=[]}),$("button.api-popup-authbtn").unbind(),popupDialog.find("button.api-popup-authbtn").click(function(){popupMask.hide(),popupDialog.hide();var e=window.swaggerUi.api.authSchemes,o=window.location,a=location.pathname.substring(0,location.pathname.lastIndexOf("/")),t=o.protocol+"//"+o.host+a+"/o2c.html",i=window.oAuthRedirectUrl||t,n=null,p=Math.random();for(var s in e)if(e.hasOwnProperty(s)){var r=e[s].flow;if("oauth2"!==e[s].type||!r||"implicit"!==r&&"accessCode"!==r){if("oauth2"===e[s].type&&r&&"application"===r){var l=e[s];return window.swaggerUi.tokenName=l.tokenName||"access_token",void clientCredentialsFlow(u,l.tokenUrl,s)}if(e[s].grantTypes){var c=e[s].grantTypes;for(var d in c)if(c.hasOwnProperty(d)&&"implicit"===d){var l=c[d];l.loginEndpoint.url;n=l.loginEndpoint.url+"?response_type=token",window.swaggerUi.tokenName=l.tokenName}else if(c.hasOwnProperty(d)&&"accessCode"===d){var l=c[d];l.tokenRequestEndpoint.url;n=l.tokenRequestEndpoint.url+"?response_type=code",window.swaggerUi.tokenName=l.tokenName}}}else{var l=e[s];n=l.authorizationUrl+"?response_type="+("implicit"===r?"token":"code"),window.swaggerUi.tokenName=l.tokenName||"access_token",window.swaggerUi.tokenUrl="accessCode"===r?l.tokenUrl:null,window.swaggerUi.currentKey=s}}var u=[],c=$(".scopes:last .active");for(k=0;k<c.length;k++){var g=$(c[k]).attr("data-toggle-scope");u.indexOf(g)===-1&&u.push(g)}window.enabledScopes=u,redirect_uri=i,n+="&redirect_uri="+encodeURIComponent(i),n+="&realm="+encodeURIComponent(realm),n+="&client_id="+encodeURIComponent(clientId),n+="&scope="+encodeURIComponent(u.join(scopeSeparator)),n+="&state="+encodeURIComponent(p);for(var s in additionalQueryStringParams)n+="&"+s+"="+encodeURIComponent(additionalQueryStringParams[s]);window.open(n)}),popupMask.show(),popupDialog.show()}function handleLogout(){for(key in window.authorizations.authz)window.authorizations.remove(key);window.enabledScopes=null;var e=$(".api-ic");e.addClass("btn-default"),e.removeClass("btn-success"),e.removeClass("btn-warning"),e.text("oauth"),$("#input_apiKey").val("")}function initOAuth(e){var o=e||{},a=[];if(appName=o.appName||"App",popupMask=o.popupMask||$("#api-common-mask"),popupDialog=o.popupDialog||$(".api-popup-dialog"),clientId=o.clientId||a.push("missing client id"),clientSecret=o.clientSecret||null,realm=o.realm||"",scopeSeparator=o.scopeSeparator||" ",additionalQueryStringParams=o.additionalQueryStringParams||{},a.length>0)return void log("auth unable initialize oauth: "+a);$("pre code").each(function(e,o){hljs.highlightBlock(o)});var t=$(".api-ic");t.unbind(),t.click(function(e){$(e.target).hasClass("btn-default")?handleLogin():handleLogout()})}function clientCredentialsFlow(e,o,a){var t={client_id:clientId,client_secret:clientSecret,scope:e.join(" "),grant_type:"client_credentials"};$.ajax({url:o,type:"POST",data:t,success:function(e,o,t){onOAuthComplete(e,a)},error:function(e,o,a){onOAuthComplete("")}})}function showTooltip(e,o){var a=$(e);a.tooltip({position:"bottom",container:"body",title:o,trigger:"manual"}).tooltip("show"),setTimeout(function(){a.tooltip("destroy")},500)}function fallbackMessage(e){var o="",a="cut"===e?"X":"C";return o=/iPhone|iPad/i.test(navigator.userAgent)?"Copy as text":/Mac/i.test(navigator.userAgent)?"Press ⌘-"+a+" to "+e:"Press Ctrl-"+a+" to "+e}Backbone.View=function(e){return e.extend({constructor:function(o){this.options=o||{},e.apply(this,arguments)}})}(Backbone.View);var appName,popupMask,popupDialog,clientId,realm,redirect_uri,clientSecret,scopeSeparator,additionalQueryStringParams;window.processOAuthCode=function(e){var o=e.state,a=window.location,t=location.pathname.substring(0,location.pathname.lastIndexOf("/")),i=a.protocol+"//"+a.host+t+"/o2c.html",n=window.oAuthRedirectUrl||i,p={client_id:clientId,code:e.code,grant_type:"authorization_code",redirect_uri:n};clientSecret&&(p.client_secret=clientSecret),$.ajax({url:window.swaggerUi.tokenUrl,type:"POST",data:p,success:function(e,a,t){onOAuthComplete(e,o)},error:function(e,o,a){onOAuthComplete("")}})},window.onOAuthComplete=function(e,o){if(e)if(e.error){var a=$("input[type=checkbox],.secured");a.each(function(e){a[e].checked=!1}),alert(e.error)}else{var t=e[window.swaggerUi.tokenName];if(o||(o=window.swaggerUi.currentKey||e.state),t){var i=null;$.each($(".auth #api_information_panel"),function(e,o){var a=o;if(a&&a.childNodes){var t=[];$.each(a.childNodes,function(e,o){var a=o.innerHTML;a&&t.push(a)});for(var n=[],p=0;p<t.length;p++){var s=t[p];window.enabledScopes&&window.enabledScopes.indexOf(s)==-1&&n.push(s)}n.length>0?(i=o.parentNode,$(i).find(".api-ic").addClass("btn-warning"),$(i).find(".api-ic").removeClass("btn-default"),$(i).find(".api-ic").removeClass("btn-success")):(i=o.parentNode,$(i).find(".api-ic").addClass("btn-success"),$(i).find(".api-ic").removeClass("btn-default"),$(i).find(".api-ic").removeClass("btn-warning"))}}),$(".api-ic").text("signout"),$("#input_apiKey").val(t),window.swaggerUi.api.clientAuthorizations.add(o,new SwaggerClient.ApiKeyAuthorization("Authorization","Bearer "+t,"header"))}}};var copyButtons=new Clipboard("[data-clipboard-target]");copyButtons.on("success",function(e){e.clearSelection(),showTooltip(e.trigger,"Copied!")}),copyButtons.on("error",function(e){showTooltip(e.trigger,fallbackMessage(e.action))});
//# sourceMappingURL=min.js.map
